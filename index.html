<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRDR.5 Discipline</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#020617">

    <style>
        :root {
            --bg: #020617;
            --card: #0f172a;
            --accent: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
            --text: #f8fafc;
            --text-dim: #94a3b8;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, system-ui, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body { 
            background: var(--bg); 
            color: var(--text); 
            padding: 20px 16px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container { 
            width: 100%; 
            max-width: 420px; 
        }

        .balance-card {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            padding: 30px 20px; 
            border-radius: 24px;
            margin-bottom: 20px; 
            border: 1px solid rgba(255,255,255,0.05);
            text-align: center;
        }

        .label { font-size: 11px; color: var(--text-dim); text-transform: uppercase; margin-bottom: 5px; }
        .amount { font-size: 36px; font-weight: 800; color: #fff; margin-bottom: 15px; }

        .card {
            background: var(--card); 
            padding: 20px; 
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.05); 
            margin-bottom: 20px;
        }

        .bar-bg { width: 100%; height: 10px; background: #1e293b; border-radius: 10px; overflow: hidden; margin: 15px 0; }
        .bar-fill { height: 100%; width: 0%; transition: width 0.4s ease; background: var(--accent); }

        .btn-group { display: flex; background: #020617; padding: 4px; border-radius: 12px; margin-bottom: 15px; }
        .t-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: bold; background: transparent; color: var(--text-dim); cursor: pointer; }
        .t-btn.active.win { background: var(--success); color: white; }
        .t-btn.active.loss { background: var(--danger); color: white; }

        input {
            width: 100%; background: #020617; border: 1px solid #1e293b;
            padding: 16px; border-radius: 12px; color: white; margin-bottom: 15px;
            font-size: 16px; outline: none; text-align: center;
        }

        .btn-main {
            width: 100%; background: #fff; color: #000; border: none;
            padding: 18px; border-radius: 12px; font-weight: 800; font-size: 16px;
        }

        .log-item {
            background: var(--card); padding: 15px; border-radius: 16px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px; border-left: 5px solid var(--accent);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="balance-card">
            <div class="label">Saldo Akun Demo</div>
            <div id="balance-txt" class="amount">$1.000,00</div>
        </div>

        <div class="card">
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 14px;">
                <span>Quota Trading</span>
                <span id="quota-txt">0/5</span>
            </div>
            <div class="bar-bg"><div id="bar-fill" class="bar-fill"></div></div>

            <div id="form-ui">
                <div class="btn-group">
                    <button id="win-btn" class="t-btn active win" onclick="setType(true)">PROFIT</button>
                    <button id="loss-btn" class="t-btn" onclick="setType(false)">LOSS</button>
                </div>
                <input type="number" id="amt-input" placeholder="0.00" inputmode="decimal">
                <button class="btn-main" onclick="addEntry()">SIMPAN RECORD</button>
            </div>
            <div id="done-msg" style="display:none; text-align:center; color:var(--success); font-weight:bold; padding:10px;">
                JATAH HARI INI HABIS üßò‚Äç‚ôÇÔ∏è
            </div>
        </div>

        <div id="log-list"></div>

        <button onclick="clearData()" style="width:100%; background:transparent; border:none; color:var(--text-dim); font-size:10px; margin-top:40px; text-decoration:underline; opacity:0.5;">RESET DATA</button>
    </div>

    <script>
        let balance = parseFloat(localStorage.getItem('t_bal_v9') || 1000);
        let entries = JSON.parse(localStorage.getItem('t_entries_v9') || '[]');
        let isWin = true;

        if (localStorage.getItem('t_date_v9') !== new Date().toLocaleDateString()) {
            entries = [];
            localStorage.setItem('t_date_v9', new Date().toLocaleDateString());
        }

        function setType(val) {
            isWin = val;
            document.getElementById('win-btn').className = val ? 't-btn active win' : 't-btn';
            document.getElementById('loss-btn').className = !val ? 't-btn active loss' : 't-btn';
        }

        function updateUI() {
            document.getElementById('balance-txt').innerText = '$' + balance.toLocaleString('id-ID', {minimumFractionDigits:2});
            document.getElementById('quota-txt').innerText = entries.length + '/5';
            document.getElementById('bar-fill').style.width = (entries.length / 5 * 100) + '%';
            
            if (entries.length >= 5) {
                document.getElementById('form-ui').style.display = 'none';
                document.getElementById('done-msg').style.display = 'block';
            }

            const list = document.getElementById('log-list');
            list.innerHTML = '';
            entries.forEach(e => {
                const item = document.createElement('div');
                item.className = 'log-item';
                item.style.borderLeftColor = e.win ? 'var(--success)' : 'var(--danger)';
                item.innerHTML = `
                    <div><div style="font-weight:bold">Entry</div><div style="font-size:10px;color:var(--text-dim)">${e.time}</div></div>
                    <div style="font-weight:bold; color:${e.win ? 'var(--success)' : 'var(--danger)'}">${e.win?'+':''}${e.val.toFixed(2)}$</div>
                `;
                list.prepend(item);
            });
        }

        function addEntry() {
            const input = document.getElementById('amt-input');
            const val = parseFloat(input.value);
            if (!val || entries.length >= 5) return;
            const finalVal = isWin ? val : -val;
            entries.push({ val: finalVal, win: isWin, time: new Date().toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit'}) });
            balance += finalVal;
            localStorage.setItem('t_bal_v9', balance);
            localStorage.setItem('t_entries_v9', JSON.stringify(entries));
            input.value = '';
            updateUI();
        }

        function clearData() { if (confirm('Reset?')) { localStorage.clear(); location.reload(); } }

        updateUI();
    </script>
</body>
</html>

